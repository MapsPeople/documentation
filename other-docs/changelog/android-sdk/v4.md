# V4

### \[4.1.10] 2023-08-02[​](https://docs.mapsindoors.com/changelogs/android#4110-2023-08-02) <a href="#4110-2023-08-02" id="4110-2023-08-02"></a>

#### Changed[​](https://docs.mapsindoors.com/changelogs/android#changed) <a href="#changed" id="changed"></a>

* Updated Display Rule validation to only throw when developer mode is enabled (it can be enabled by calling `MPDebugLog.enableDeveloperMode(true)`)
  * Additionally, validation will now give more usable error messages

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed) <a href="#fixed" id="fixed"></a>

* Fixed issue where setting departure time to the current time would fail route creation when using Google Maps in some cases

### \[4.1.9] 2023-07-24[​](https://docs.mapsindoors.com/changelogs/android#419-2023-07-24) <a href="#419-2023-07-24" id="419-2023-07-24"></a>

#### Changed[​](https://docs.mapsindoors.com/changelogs/android#changed-1) <a href="#changed-1" id="changed-1"></a>

* External routes will now respect the language set in the SDK
* The SDK now supports zoom levels beyond 22 where applicable

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-1) <a href="#fixed-1" id="fixed-1"></a>

* Fixed rare issue where SDK would attempt to update a dead marker resulting in a crash

### \[4.2.0-beta.1] 2023-06-28[​](https://docs.mapsindoors.com/changelogs/android#420-beta1-2023-06-28) <a href="#420-beta1-2023-06-28" id="420-beta1-2023-06-28"></a>

#### Added[​](https://docs.mapsindoors.com/changelogs/android#added) <a href="#added" id="added"></a>

* Added support for 3D models

### \[4.1.8] 2023-06-28[​](https://docs.mapsindoors.com/changelogs/android#418-2023-06-28) <a href="#418-2023-06-28" id="418-2023-06-28"></a>

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-2) <a href="#fixed-2" id="fixed-2"></a>

* Fixed issue where setting departure time on a route would cause the SDK to crash
* Fixed issue where loading the SDK offline could cause a crash
* Fixed issue where route line would be obscured by walls and extrusion when using Mapbox

### \[4.1.7] 2023-06-23[​](https://docs.mapsindoors.com/changelogs/android#417-2023-06-23) <a href="#417-2023-06-23" id="417-2023-06-23"></a>

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-3) <a href="#fixed-3" id="fixed-3"></a>

* Fixed timing issues with display rules and applying UserRoles
* Fixed issue where a rendered route would be obscured

### \[4.1.6] 2023-06-02[​](https://docs.mapsindoors.com/changelogs/android#416-2023-06-02) <a href="#416-2023-06-02" id="416-2023-06-02"></a>

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-4) <a href="#fixed-4" id="fixed-4"></a>

* Fixed compilation issues, due to a build configuration

### \[4.1.5] 2023-06-01[​](https://docs.mapsindoors.com/changelogs/android#415-2023-06-01) <a href="#415-2023-06-01" id="415-2023-06-01"></a>

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-5) <a href="#fixed-5" id="fixed-5"></a>

* Fixed crashes happening when loading new solutions while a load is ongoing

### \[4.1.4] 2023-05-25[​](https://docs.mapsindoors.com/changelogs/android#414-2023-05-25) <a href="#414-2023-05-25" id="414-2023-05-25"></a>

#### Changed[​](https://docs.mapsindoors.com/changelogs/android#changed-2) <a href="#changed-2" id="changed-2"></a>

* Updated Mapbox version to 10.13.0

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-6) <a href="#fixed-6" id="fixed-6"></a>

* Fixed issue where MapsIndoors could crash when other markers were present on the map
* Reduced memory usage of 2D models
* Fixed issue where changing solution on the same map would not work

### \[4.1.3] 2023-05-16[​](https://docs.mapsindoors.com/changelogs/android#413-2023-05-16) <a href="#413-2023-05-16" id="413-2023-05-16"></a>

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-7) <a href="#fixed-7" id="fixed-7"></a>

* Fixed occasional crashes when destroying MapsIndoors
* Fixed occasional crash when selecting location after load

### \[4.1.2] 2023-05-11[​](https://docs.mapsindoors.com/changelogs/android#412-2023-05-11) <a href="#412-2023-05-11" id="412-2023-05-11"></a>

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-8) <a href="#fixed-8" id="fixed-8"></a>

* Fixed map padding not being applied to camera movement when using Mapbox
* Fixed delay when selecting a location until its info window appeared on Mapbox
* Fixed `selectLocation` not moving the camera when the location was outside the viewport
* Fixed crash that could occur when Mapbox can not generate a route
* Fixed issue where large areas were not being shown on Google Maps
* Fixed issue where SDK would crash if solution data is unavailable remotely, but the local cache data stored
* Fixed issue where location display rules would receive a unidentifiable name/id

### \[4.1.1] 2023-03-09[​](https://docs.mapsindoors.com/changelogs/android#411-2023-03-09) <a href="#411-2023-03-09" id="411-2023-03-09"></a>

#### Changed[​](https://docs.mapsindoors.com/changelogs/android#changed-3) <a href="#changed-3" id="changed-3"></a>

* Made `MPMapBehavior` JSON serializable, and its getters public
* Updated MapsPeople watermark

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-9) <a href="#fixed-9" id="fixed-9"></a>

* Fixed rare case where the SDK would load successfully but still crash
* Fixed being unable to get `MPSolutionDisplayRule`s by name
* Fixed issue where tiles would not update when switching floors

### \[4.1.0] 2023-02-21[​](https://docs.mapsindoors.com/changelogs/android#410-2023-02-21) <a href="#410-2023-02-21" id="410-2023-02-21"></a>

#### Deprecated[​](https://docs.mapsindoors.com/changelogs/android#deprecated) <a href="#deprecated" id="deprecated"></a>

* Deprecated `MPBuilding.getInitialZIndex()` and added `getInitialFloorIndex()` to replace it
* Deprecated `MPBuilding.getFloorByZIndex()` and added `getFloorByIndex` to replace it
* Deprecated `MPDataSetCache.setScope(Context, MPDataSetCacheScope)` and added \`setScope(MPDataSetCacheScope) to replace it
* Deprecated `MPDataSetCacheItem.getCacheSize(Context)` and added `getCacheSize()` to replace it
* Deprecated `MPDirectionsService(Context)` CTOR and added `MPDirectionsService()` to replace it
* Deprecated `MPFloor.getZIndex()` and added `getFloorIndex` to replace it
* Deprecated `MPFloor.setZIndex()` and added `setFloorIndex` to replace it
* Deprecated `MPRouteCoordinate.getZIndex()` and added `getFloorIndex` to replace it
* Deprecated `MPRouteCoordinate.setZIndex()` and added `setFloorIndex` to replace it
* Deprecated `MPSolutionInfo` as it duplicates information from `MPSolution`

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-10) <a href="#fixed-10" id="fixed-10"></a>

* Fixed `ANY_DOMAIN` livedata domain not having any effect
* Fixed rare issue where collision between markers could cause a crash
* Fixed issue where setting some listeners could cause a crash
* Fixed reference documentation around `MPVenue.getName()`, see [the migration guide](https://docs.mapsindoors.com/content/getting-started/v4-migration-guide/#venue-name) for more information
* Various fixes and improvements

### \[4.0.5] 2023-01-26[​](https://docs.mapsindoors.com/changelogs/android#405-2023-01-26) <a href="#405-2023-01-26" id="405-2023-01-26"></a>

#### Added[​](https://docs.mapsindoors.com/changelogs/android#added-1) <a href="#added-1" id="added-1"></a>

* Added Extension functions for converters, these are usable from kotlin projects

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-11) <a href="#fixed-11" id="fixed-11"></a>

* Fixed issue where SDK would try to use destroyed context to access files directory
* Fixed `MPSelectionBehavior` and `MPFilterBehavior` super class `MPMapBehavior` not being public
* Fixed a number of memory leaks

### \[4.0.4] 2023-01-17[​](https://docs.mapsindoors.com/changelogs/android#404-2023-01-17) <a href="#404-2023-01-17" id="404-2023-01-17"></a>

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-12) <a href="#fixed-12" id="fixed-12"></a>

* Fixed issue with the livedata SDK where subscribing to some domains would subscribe to multiple domains instead
* Fixed issue where `MPApiKeyValidator` would send multiple errors instead of just one
* Fixed issue where the SDK would update UI elements on non-main thread
* Fixed memory leaks where the map view was leaked

### \[4.0.3] 2023-01-05[​](https://docs.mapsindoors.com/changelogs/android#403-2023-01-05) <a href="#403-2023-01-05" id="403-2023-01-05"></a>

#### Added[​](https://docs.mapsindoors.com/changelogs/android#added-2) <a href="#added-2" id="added-2"></a>

* Added factory methods `fromValue(int)` and `fromStringValue(String)` to `MPCollisionHandling`
* Added `removeOnFloorUpdateListener(OnFloorUpdateListener)` to `MapControl`
* Added `isInside(MPLatLng)` method to `MPGeometry`

#### Deprecated[​](https://docs.mapsindoors.com/changelogs/android#deprecated-1) <a href="#deprecated-1" id="deprecated-1"></a>

* Deprecated `getCurrentStyle()` and `setCurrentStyle(String)` in `MPFloor`

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-13) <a href="#fixed-13" id="fixed-13"></a>

* Fixed issue where main and solution type rules could not be fetched by name
* Fixed issue where SDK would crash during startup
* Fixed issue where giving `MPPoint`s with no floorIndexes to `MPDirectionsService` would result in bugged routes
* Fixed issue when generating `MPPolygonGeometry` from `MPMultiPolygonGeometry`
* Fixed memory leak where the SDK would hold onto the maps `FrameLayout`
* Fixed issues that could occur if the SDK is shut down during startup

### \[4.0.2] 2022-11-02[​](https://docs.mapsindoors.com/changelogs/android#402-2022-11-02) <a href="#402-2022-11-02" id="402-2022-11-02"></a>

#### Added[​](https://docs.mapsindoors.com/changelogs/android#added-3) <a href="#added-3" id="added-3"></a>

* Added Reverse Geocoding interface
  * It can be used to fetch mapsindoors data from a given geographical coordinate
* Added ability to use a `Context` when building a `MPMapConfig`, instead of an `Activity`

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-14) <a href="#fixed-14" id="fixed-14"></a>

* Fixed 2D model rendering related issues
* Fixed Live Data badges in some cases overlapping the icon or label
* Fixed issue with Main Display Rule not being respected in some instances
* Fixed race-condition crash that could occur on Google Maps

### \[4.0.1] 2022-10-18[​](https://docs.mapsindoors.com/changelogs/android#401-2022-10-18) <a href="#401-2022-10-18" id="401-2022-10-18"></a>

#### Added[​](https://docs.mapsindoors.com/changelogs/android#added-4) <a href="#added-4" id="added-4"></a>

* Added `getLocationsByExternalIds` to `MapsIndoors`
  * This can be used to get a list of locations based on a corresponding list of external ids
* Exposed layer names on Mapbox implementation, allowing custom layers to be inserted between `MapsIndoors` layers
  * The list of layers can be accessed from the `MPLayers` class

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-15) <a href="#fixed-15" id="fixed-15"></a>

* Fixed issue with display rule inheritance from the main display rule
* Fixed memory issue that could occur when loading a large amount of 2D models
* Various minor fixes

### \[4.0.0] 2022-09-29[​](https://docs.mapsindoors.com/changelogs/android#400-2022-09-29) <a href="#400-2022-09-29" id="400-2022-09-29"></a>

#### Added[​](https://docs.mapsindoors.com/changelogs/android#added-5) <a href="#added-5" id="added-5"></a>

* Support for new map providers
  * Mapbox
    * MapsIndoors can now be packaged with the Mapbox v10 SDK
* 2D Model support
  * The Android SDK is now capable of displaying 2D Models (also known as Ground Overlays)
* `goTo()`
  * A new method for moving the camera to MapsIndoors locations, this new method `goTo()` can be used with any class that implements `MPEntity`, which includes but is not limited to `MPLocation`, `MPFloor`, and `MPBuilding`
* Solution Config
  * The Android SDK now supports the Solution Config
  * This also introduces the new Main Display Rule, which is bundled into the solution config, along with collision handling, clustering and 3D (walls and extrusions) opacity

#### Changed[​](https://docs.mapsindoors.com/changelogs/android#changed-4) <a href="#changed-4" id="changed-4"></a>

* Maven package changes
  * With the move to supporting multiple map platforms, we had to move some stuff around in the package, the SDK can now be downloaded via these maven dependencies
    * `'com.mapspeople.mapsindoors:googlemaps:4.0.0'`
    * `'com.mapspeople.mapsindoors:mapbox:4.0.0'`
* Naming convention
  * All public classes now has a MP prefix, with the exemption of MapControl, MapsIndoors and some listeners
  * New interfaces will use the MPI prefix
  * Some public classes will have a `[INTERNAL]` at the top of their javadoc, these classes are used for communication between the core SDK and map platform specific code. Refrain from using these classes unless you know what you are doing
* Display Rules
  * Display rules have been reworked completely
  * It has been reduced to a single class MPDisplayRule
  * It is now reference based, thus any changes to the rule are instantaneous
  * `MPDisplayRuleOptions` has been added and is used to bulk edit display rules
  * Display rules can be reset with `reset()` this will return the display rule to the state it has in the CMS
* Display search results
  * Has been renamed to `setFilter()`, and have been reworked completely
  * Now takes a `MPFilterBehavior`, which is used to dictate the behavior of the filter on the map
* Selection
  * Selection, like filtering, has improved, it now uses a `MPSelectionBehavior` which is used to dictate the behavior of the selection on the map
* Initialization (MapsIndoors and MapControl)
  * Now `MapsIndoors` is initialized with the `load(appContext, APIKey, listener)` method. This applies to both initial initialization, and when updating the context or API key
  * `MapControl` no longer has a public constructor and initializer method, it now uses a factory method `create(MPMapConfig, onMapControlReady)`
    * The `onMapControlReady` listener will wait for MapControl to finish initializing, this guarantees that `MapControl` cannot be aquired in a broken state
    * The `MPMapConfig` is a collection of settings that previously had to be set on MapControl at various stages of initialization to take effect. These are now bundled into a single package that take effect when `MapControl` finishes initializing
      * These settings can still be updated individually at runtime
* Routing
  * `MPRoutingProvider` has been renamed to `MPDirectionsService` to align with other platforms
  * `MPDirectionsRenderer` has been simplified in use, after creation `MPDirectionsRenderer(MapControl)`, `setRoute(MPRoute)` can be called and it will display the route on the map
* Clustering and Collision handling has been moved from `MPAppConfig` to `MPSolutionConfig`, and have recieved proper typing, Collision handling is now defined by an enum `MPCollisionHandling`
  * Collision handling now has multiple states that allow for better control of how markers are shown on the map

#### Removed[​](https://docs.mapsindoors.com/changelogs/android#removed) <a href="#removed" id="removed"></a>

* The MPPositionProvider interface has been reduced to 3 methods thare are essential for interfacing a position provider with the SDK
* A large amount of unused/unwanted/unusable classes have been removed from the SDK

#### Fixed[​](https://docs.mapsindoors.com/changelogs/android#fixed-16) <a href="#fixed-16" id="fixed-16"></a>

* Optimized memory management of icons
* Display rules are now applied much more consistently

[\
](https://docs.mapsindoors.com/event-logging)
